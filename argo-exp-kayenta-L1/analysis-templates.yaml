apiVersion: argoproj.io/v1alpha1
kind: AnalysisTemplate
metadata:
  name: mann-whitney
spec:
  args:
  - name: start-time
  - name: end-time
  metrics:
  - name: mann-whitney
    provider:
      kayenta:
        address: https://1f4d-122-166-128-163.in.ngrok.io
        application: prom-test-app
        canaryConfigName: prom-config
        metricsAccountName: my-prometheus-account
        storageAccountName: in-memory-store-account
        configurationAccountName: in-memory-store-account
        scopes:
        - name: default
          controlScope:
            scope: default
            step: 60
            start: "{{args.start-time}}"
            end: "{{args.end-time}}"
            region: default
          experimentScope:
            scope: default
            step: 60
            start: "{{args.start-time}}"
            end: "{{args.end-time}}"
            region: default
        threshold:
          pass: 70
          marginal: 50
    interval: 60s
    count: 5
